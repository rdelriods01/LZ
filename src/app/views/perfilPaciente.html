<div class="perfSuperior">
    <div class="perfSupIzq" >
        <div class="datosGenerales">
            <div class="perfNombre">
                <div style="display: flex">
                    <h1 style="margin: 0 auto">{{paciente.nombre}}
                        <button md-button (click)="openHisCliDialog(paciente)" ><md-icon>mode_edit</md-icon></button>
                        <button style="min-width: 2em" md-button (click)='seguroElim()' ><md-icon>delete</md-icon></button>
                    </h1>
                </div>
                <h2 style="color: dimgray">{{paciente.sexo}} de {{paciente.edad}} años, estatura: {{paciente.estatura}} cms </h2>
            </div>
            <div class="Contacto"> 
                <div><h5>Telefono: </h5><p>{{paciente.telefono}}</p></div>
                <div><h5>e-mail: </h5><p>{{paciente.correo}}</p></div>
                <div><h5>Dirección:</h5> <p>{{paciente.direccion.calle + ' , ' + paciente.direccion.colonia + ' en ' + paciente.direccion.ciudad}}</p></div>
            </div>
        </div>
        <div class="historiaClinica">
            <h3 style="text-align: center">Historia Clínica</h3>
            <div *ngIf="enf!=''" ><h5>Enfermedades: </h5><p>{{enf}}</p></div>
            <div *ngIf="malesta!=''" ><h5>Malestares: </h5><p>{{malesta}}</p></div>
            <div *ngIf="alerg!=''" ><h5>Alergias: </h5><p>{{paciente.alergias}}</p></div>
            <div *ngIf="noinclu!=''" ><h5>No incluir en la dieta: </h5><p>{{paciente.noincluir}}</p></div>
            <div *ngIf="observa!=''" ><h5>Observaciones: </h5><p>{{paciente.observaciones}}</p></div>
        </div>
    </div>
    <div class="perfSupDer">
        <div *ngIf="showAvances" class="avances" >
            <div *ngIf="!subio" class="spinners">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100" height="75" viewbox="5 5 100 80" preserveAspectRatio="xMidYMid meet">
                    <path class="backS" d="M80,70 A40,40 0 1,0 20,70"
                          style="fill:none;"/>
                    <path class="frontS" d="M80,70 A40,40 0 1,0 20,70" [ngStyle]="{'stroke-dashoffset':(-184+(spinval*1.84))}"
                          style="fill:none;"/>
                </svg>
                <div class="porBajar">
                    <p>{{porbajar}}Kg</p>
                    <h4>por bajar</h4>
                </div>
            </div>
            <div *ngIf="subio" class="subio" >
                <md-icon class="sad">sentiment_very_dissatisfied</md-icon>
                <h2> Por arriba del peso inicial </h2>
            </div>
                    <!-- <input type="range" #ranger min="0" max="100" step="1" value="50" (input)="calculatePercent(ranger.value)" >{{spinval}} -->
            <div class="pesos" >
                <div class="pesosSup">
                    <p>{{paciente.pesoajustado}} kg <span>Peso ajustado</span> </p>
                    <p>{{pesoinicial}} kg <span>Peso inicial</span> </p>
                </div>
                <div class="pesosInf">
                    <p style="color:tomato" >{{pesoactual}} kg <span>Peso actual</span> </p>
                    <p *ngIf="!subio" style="color:#4CAF50" >{{totalbajado}} kg <span>Total bajado</span> </p>
                    <p *ngIf="subio" style="color:#d11e11" >{{totalbajado}} kg <span>Total subido</span> </p>
                </div>
            </div>
        </div>
                
        <div *ngIf="yaConsultar" class="botones">
            <h3 *ngIf="!proxcita" style="text-align:center;"  >Cita programada hoy a las {{horaCita}} hrs. </h3>
            <button md-button *ngIf="!proxcita" (click)="openConsultarDialog(paciente,citas)" id="btnConsultar">Consultar</button>
            <button md-button *ngIf="!proxcita" (click)="editCita(cita)" >Cambiar cita</button>
            <h3 *ngIf="!showList && proxcita" style="text-align: center;" >Paciente sin citas aun</h3>
            <button md-button *ngIf="proxcita" (click)="openProxCitaDialog(paciente)" id="btnProxCita" >Agendar Cita</button>
        </div>
        <div *ngIf="!yaConsultar" class="aunNo">
            <h2>No es el dia de la cita</h2>
            <h3>Cita programada para el {{fechaProx}} a las {{horaCita}}</h3>
            <button md-button (click)="editCita(cita)" >Cambiar cita</button>
        </div>
    </div>
</div>
<div *ngIf="showList"  class="perfInferior">
    <md-card>   
        <div class="perfInfTitle">
            <h2 *ngIf="proxcita" >{{totaldevisitas}} Consultas previas
                <button md-button *ngIf="visible" class="btnSmall btnTrash" (click)="seguroDelVisita()" ><md-icon>delete</md-icon></button>    
            </h2>
            <h2 *ngIf="!proxcita" >{{totaldevisitas-1}} Consultas previas
                <button md-button *ngIf="visible" class="btnSmall btnTrash" (click)="seguroDelVisita()" ><md-icon>delete</md-icon></button>    
            </h2>
            <button md-button (click)="showMore()" ><md-icon>more_horiz</md-icon></button>
        </div>
        <div style="overflow-x:auto;">   
            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Peso</th>
                        <th>Grasa</th>
                        <th>Músculo</th>
                        <th>Abdomen</th>
                        <th *ngIf="genero=='Mujer'"  >Cadera</th>
                        <th>Glucosa</th>
                        <th>Menú</th>
                        <th>Comentarios</th>
                        <th *ngIf="visible" >Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    
                    <tr *ngFor="let visita of citas1" >
                        <td >{{visita.fecha}}</td>
                        <td [ngStyle]="{'color':visita.colP}"> {{visita.peso}} Kg <md-icon *ngIf="visita.arrowP" class="arrow" > {{visita.arrowP}}</md-icon> {{visita.difP}} </td>
                        <td [ngStyle]="{'color':visita.colG}"> {{visita.grasa}} Kg <md-icon *ngIf="visita.arrowG" class="arrow" > {{visita.arrowG}}</md-icon> {{visita.difG}} </td>
                        <td [ngStyle]="{'color':visita.colM}"> {{visita.musculo}} Kg <md-icon *ngIf="visita.arrowM" class="arrow" > {{visita.arrowM}}</md-icon> {{visita.difM}} </td>
                        <td [ngStyle]="{'color':visita.colA}"> {{visita.abdomen}} cm <md-icon *ngIf="visita.arrowA" class="arrow" > {{visita.arrowA}}</md-icon> {{visita.difA}} </td>
                        <td *ngIf="genero=='Mujer'" [ngStyle]="{'color':visita.colC}"> {{visita.cadera}} cm <md-icon *ngIf="visita.arrowC" class="arrow" > {{visita.arrowC}}</md-icon> {{visita.difC}} </td>
                        <td [ngStyle]="{'color':visita.colGl}"> {{visita.glucosa}} mg/dl <md-icon *ngIf="visita.arrowGl" class="arrow" > {{visita.arrowGl}}</md-icon> {{visita.difGl}} </td>
                        <td >{{visita.menu}}</td>
                        <td >{{visita.comentarios}}</td>
                        <td *ngIf="visible">
                            <button md-button (click)="editVisita(visita,paciente)" ><md-icon>mode_edit</md-icon></button> 
                        </td>
                        <td *ngIf='seguroV' class="confirmDelVisita" >
                            <h4 style="margin: 0 auto">¿Elminar?</h4>
                            <button md-button class="btnSmall" (click)="siDelVisita(visita.id)" >Si</button> 
                            <button md-button class="btnSmall" (click)="noDelVisita()" >No</button>
                        </td>
                    </tr> 
                </tbody>
            </table>
        </div>
    </md-card>
    <md-card *ngIf="showGraf">
        <div class="graficaProgreso">
            <canvas baseChart 
                [datasets]="gData"
                [labels]="lineChartLabels"
                [options]="lineChartOptions"
                [legend]="lineChartLegend"
                [chartType]="lineChartType">
            </canvas>
        </div>
    </md-card>
</div>

<div *ngIf='seguro' class="dialogDelete">       
    <md-card>
        <h2>Seguro que desea eliminar a {{paciente.nombre}} </h2>
        <button md-button (click)='siEliminar()' >Si</button>
        <button md-button (click)='noEliminar()' >No</button>
    </md-card>
</div>